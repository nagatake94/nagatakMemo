# 論理型（boolean）

[PHP Docs](https://www.php.net/manual/ja/language.types.float.php)

浮動小数点数 (あるいは "float", "double", "実数") は、次の構文により指定可能

```
<?php
$a = 1.234;
$b = 1.2e3;
$c = 7E-10;
$d = 1_234.567; // PHP 7.4.0 以降
?>
```

## 注意
### 浮動小数点数の精度

```
浮動小数点数の精度は有限であり、システムに依存しますが、PHP は通常 IEEE 754 倍精度フォーマットを使用する。
この形式は、1.11e-16 のオーダーでの丸め処理で誤差が発生する。
複雑な算術演算をすると、誤差はさらに大きくなるでしょう。そしてもちろん、 いくつかの演算を組み合わせる場合にも誤差を考慮しなければならない。

さらに、十進数では正確な小数で表せる有理数、たとえば 0.1 や 0.7 は、 二進数の浮動小数点数としては正確に表現不可。
これは、仮数部をいくら大きくしても同じである。したがって、それを内部的な二進数表現に変換する際には、どうしても多少精度が落ちてしまう。
その結果、不思議な結果を引き起こすことがある。

たとえば、 floor((0.1+0.7)*10) の結果はたいてい 7 となるでしょう。おそらくは 8 を想定しているが、そのようにはならない。
これは、(この計算結果の) 内部的な値が 7.9999999999999991118... のようになっているからである。

よって、小数の最後の桁を信用してはいけないし、 小数を直接比較して等しいかどうかを調べてはいけない。
より高い精度が必要な場合には、 任意精度数学関数または gmp 関数を代わりに使用する必要がある。

もっと「シンプルな」説明が欲しければ、» floating point guide を見るとよい。"Why don’t my numbers add up? (なんで数字が足されないの?)" というタイトルが付いている。
```

## floatの比較

上記のように浮動小数点数値が等しいかどうかを比較するのには問題がある。
これは、浮動小数点数値の内部表現形式に起因するものである。しかし、この制限を回避して浮動小数点数値の値を比較する方法もある。

浮動小数点数値が等しいかどうかを調べるには、比較時の丸め誤差の上界を用いる。
この値は計算機イプシロンあるいは丸め単位と呼ばれ、 計算時に扱える最小の差分を表す。

$a と $b は、精度 5 桁では等しくなる。

```
<?php
$a = 1.23456789;
$b = 1.23456780;
$epsilon = 0.00001;

if(abs($a-$b) < $epsilon) {
    echo "true";
}
?>
```
