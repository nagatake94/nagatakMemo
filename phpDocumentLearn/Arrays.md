# 論理型（boolean）

[PHP Docs](https://www.php.net/manual/ja/language.types.array.php)

PHP の配列は、実際には順番付けられたマップである。マップは型の一種で、 値をキーに関連付けます。 この型は、さまざまな使い道にあわせて最適化される。 配列としてだけでなく、リスト (ベクター)、 ハッシュテーブル (マップの実装の一つ)、ディクショナリー、コレクション、スタック、 キュー等として使用することが可能である。 PHP の配列には他の PHP 配列を値として保持することができるため、 非常に簡単にツリー構造を表現することが可能。

## 構文

**array() で指定 **

配列 は、言語に組み込まれた array() で作成することが可能である。この構造は、 特定の数のカンマで区切られた キー => 値 の組を引数とする。

```
array(
    key  => value,
    key2 => value2,
    key3 => value3,
    ...
)
```

最後の要素のあとのカンマは、書いても書かなくてもよい。
配列を一行で定義する場合は、ふつうは最後のカンマを省略する。つまり、 array(1, 2) のほうが array(1, 2, ) よりおすすめだということ。しかし複数行で定義する場合は、最後のカンマをつけることが一般的である。 そうしておけば、配列の最後に要素を追加するのが容易になるから。

例1 シンプルな配列定義

```
<?php
$array = array(
    "foo" => "bar",
    "bar" => "foo",
);

// 配列の短縮構文
$array = [
    "foo" => "bar",
    "bar" => "foo",
];
?>
```

keyは、整数または文字列となる。
valueには任意の型を指定できる。

さらに、次のようなkeyのキャストが発生する

  - 10進数のintとして妥当な形式のStringは、数値の前に+記号がついていない限り、int型にキャストされる。つまり、キーに"8"を指定すると、実際には8として格納されるということ。一方"08"はキャストされない。これは10進数として妥当な形式ではないから
  - floatもintにキャストされる。つまり小数部分は切り捨てられるということ。例えば、keyに8.7を指定すると実際には8として格納される。
  - boolもintにキャストされる。つまり、keyにtrueを指定すると実際には1が格納され、同様にkeyをfalseとすると実際には0となる。
  - Nullは空文字列にキャストされる。つまり、keyにnullを指定すると、実際には””として格納される
  - arrayやobjectは、keyとして扱えない。keyとして扱おうとするとIllegal offset typeという警告が発生する

配列の宣言時に同じkeyで複数の要素を指定すると、最後に指定したものがそれまでの値を上書きする

例2 型のキャストと値の上書きの例

```
<?php
$array = array(
    1    => "a",
    "1"  => "b",
    1.5  => "c",
    true => "d",
);
var_dump($array);
?>
```
出力結果

```
array(1) {
  [1]=>
  string(1) "d"
}
```

※PHPにおいては添字配列と連想配列に違いはなく、配列型は1つだけで、同じ配列で整数のインデックスと文字列のインデックスを同時扱える

例3 整数と文字列のキーの混在例

```
<?php
$array = array(
    "foo" => "bar",
    "bar" => "foo",
    100   => -100,
    -100  => 100,
);
var_dump($array);
?>
```
出力結果

```
array(4) {
  ["foo"]=>
  string(3) "bar"
  ["bar"]=>
  string(3) "foo"
  [100]=>
  int(-100)
  [-100]=>
  int(100)
}
```

keyはオプションである。省略した場合は、PHPはこれまでに使われた整数のkeyの中で最大のものに1を加えた値を使う。

例4 数値添字配列でキーを省略する例

```
<?php
$array = array("foo", "bar", "hello", "world");
var_dump($array);
?>
```

出力結果

```
array(4) {
  [0]=>
  string(3) "foo"
  [1]=>
  string(3) "bar"
  [2]=>
  string(5) "hello"
  [3]=>
  string(5) "world"
}
```

一部の要素にだけkeyを指定することもできる

例5 一部の要素にだけkeyを指定する例

```
<?php
$array = array(
         "a",
         "b",
    6 => "c",
         "d",
);
var_dump($array);
?>
```
出力結果

```
array(4) {
  [0]=>
  string(1) "a"
  [1]=>
  string(1) "b"
  [6]=>
  string(1) "c"
  [7]=>
  string(1) "d"
}
```

※最後の値である "d" のキーは 7 となる。それまでにキーとして使われた最大の整数が 6 だからである。

## 角括弧構文に夜配列要素へのアクセス

例1 配列の要素へのアクセス

```
<?php
$array = array(
    "foo" => "bar",
    42    => 24,
    "multi" => array(
         "dimensional" => array(
             "array" => "foo"
         )
    )
);

var_dump($array["foo"]);
var_dump($array[42]);
var_dump($array["multi"]["dimensional"]["array"]);
?>
```
出力結果

```
string(3) "bar"
int(24)
string(3) "foo"
```

例2 配列のデリファレンス

```
<?php
function getArray() {
    return array(1, 2, 3);
}

$secondElement = getArray()[1];

// または、このように書くことができます
list(, $secondElement) = getArray();
?>
```

## 角括弧構文で作成/修正

明示的に値を設定することにより、既存の配列を修正することも可能。

これは、角括弧のなかにキーを指定し、配列に値を代入することにより行う。
キーを省略することも可能である。この場合、空の角括弧（”[]”）の変数名として追加する。

```
$arr[キー] = 値;
$arr[] = 値;
// キー は 文字列 または
// 整数のどちらかです。
// 値 の型は、何でもかまいません。
```
