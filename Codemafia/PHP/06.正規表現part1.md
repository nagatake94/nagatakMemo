# 正規表現

## preg_match
  - 正規表現によるマッチングを行う

### 引数
  - patternで指定した正規表現によりsubjectを検索する

```
preg_match(
    string $pattern,
    string $subject,
    array &$matches = null,
    int $flags = 0,
    int $offset = 0
): int|false
```

  - pattern
    - 検索するパターンを表す文字列
  - subject
    - 入力文字列
  - matches
    - matchesを指定した場合、検索結果が代入される。$matches[0]にはパターン全体にマッチしたテキストが代入され、$matches[1]には一番目のキャプチャにマッチした文字列が代入され、といったようになる。

### 例

```
$char = 'aAabd1_sscc';
if (preg_match("/aAa/", $char, $result)) {
    echo '検索成功';
    print_r($result);
} else {
    echo '検索失敗';
}
```
  - 結果
```
検索成功Array ( [0] => aAa )
```

### よく使う表現

 * よく使う表現
 * . 任意の一文字
 * * 0回以上の繰り返し
 * + 1回以上の繰り返し
 * {n} n回の繰り返し
 * [] 文字クラスの作成
 * [abc] aまたはbまたはc
 * [^abc] aまたはbまたはc以外
 * [0-9] 0~9まで
 * [a-z] a~zまで
 * $ 終端一致
 * ^ 先頭一致
 * \w 半角英数字とアンダースコア
 * \d 数値
 * \ エスケープ
 * () 文字列の抜き出し

### 郵便番号

  - 001-0012 -> OK
  - 001-001 -> NG
  - 2.2-3042 -> NG
  - wd3-2132 -> NG
  - 124-56789 -> NG


```
$postNum = '2.2-3042';

if (preg_match("/^\d{3}-\d{4}$/", $postNum, $result)) {
    echo '郵便番号が正しいです。';
    print_r($postNum);
} else {
    echo '郵便番号が不正です。';
}
```

### メールアドレス

  - . _ - と半角英数字が可能
  - example000@gmail.com -> OK
  - example-0.00@gmail.com -> OK
  - example-0.00@ex.co.jp -> OK
  - example/0.00@ex.co.jp -> NG


```
$email = 'example000@gmail.com';
if (preg_match("/^[\w.\-]+@[\w\-]+\.[\w\.\-]+$/", $email, $result)) {
    echo 'メールが正しいです';
    print_r($result);
} else {
    echo 'メールが不正です';
}

```

### 正規表現

```
$html = '<!DOCTYPE html>
<html>
<head>
    <title>Document</title>
</head>
<body>
    <h1>見出し１</h1>
    <h2>見出し２</h2>
    <h3>見出し３</h3>
    <header>ヘッダー</header>
</body>
</html>';

```

```
if (preg_match_all("/<h[1-6]>(.+)<\/h[1-6]>/", $html, $result)) {
    print_r($result[count($result) - 1]);
}
```
